<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ludo King India</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            max-width: 600px;
            width: 100%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2em;
        }
        
        .game-info {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .dice-area {
            margin: 30px 0;
        }
        
        .dice {
            width: 100px;
            height: 100px;
            border: 4px solid #333;
            border-radius: 15px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            font-weight: bold;
            background: white;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .dice:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }
        
        .dice.rolling {
            animation: spin 0.5s ease-in-out;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 18px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .board {
            width: 400px;
            height: 400px;
            border: 3px solid #333;
            margin: 20px auto;
            background: #fff;
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            grid-template-rows: repeat(15, 1fr);
            position: relative;
        }
        
        .cell {
            border: 1px solid #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            font-size: 12px;
            cursor: pointer;
        }
        
        .cell:hover {
            background: #f0f0f0;
        }
        
        .home-red { background: #ffcdd2; }
        .home-blue { background: #bbdefb; }
        .home-yellow { background: #fff9c4; }
        .home-green { background: #c8e6c9; }
        
        .path-red { background: #ff8a80; }
        .path-blue { background: #82b1ff; }
        .path-yellow { background: #ffff8d; }
        .path-green { background: #a5d6a7; }
        
        .safe {
            background: #f5f5f5;
            position: relative;
        }
        
        .safe::after {
            content: 'â˜…';
            color: gold;
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 10px;
        }
        
        .pawn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #000;
            cursor: pointer;
            transition: all 0.3s ease;
            position: absolute;
            z-index: 10;
        }
        
        .pawn:hover {
            transform: scale(1.2);
        }
        
        .pawn.red { background: #f44336; }
        .pawn.blue { background: #2196f3; }
        .pawn.yellow { background: #ffeb3b; }
        .pawn.green { background: #4caf50; }
        
        .pawn.movable {
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }
        
        .players {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .player {
            padding: 15px;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .player.active {
            border-color: #333;
            transform: scale(1.05);
        }
        
        .player.red { background: #ffebee; }
        .player.blue { background: #e3f2fd; }
        .player.yellow { background: #fffde7; }
        .player.green { background: #e8f5e8; }
        
        .status {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .winner {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            animation: celebrate 1s ease-in-out infinite;
        }
        
        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        @media (max-width: 600px) {
            .container { padding: 15px; }
            h1 { font-size: 1.5em; }
            .board { width: 300px; height: 300px; }
            .dice { width: 80px; height: 80px; font-size: 2em; }
            .btn { padding: 12px 20px; font-size: 16px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ² Ludo King India ðŸ‡®ðŸ‡³</h1>
        
        <div class="players">
            <div class="player red active" id="player0">
                <h3>Player 1 (Red)</h3>
                <p>Home: <span id="home0">4</span> | Out: <span id="out0">0</span></p>
            </div>
            <div class="player blue" id="player1">
                <h3>Player 2 (Blue)</h3>
                <p>Home: <span id="home1">4</span> | Out: <span id="out1">0</span></p>
            </div>
            <div class="player yellow" id="player2">
                <h3>Player 3 (Yellow)</h3>
                <p>Home: <span id="home2">4</span> | Out: <span id="out2">0</span></p>
            </div>
            <div class="player green" id="player3">
                <h3>Player 4 (Green)</h3>
                <p>Home: <span id="home3">4</span> | Out: <span id="out3">0</span></p>
            </div>
        </div>
        
        <div class="game-info" id="info">Current Player: Player 1 (Red)</div>
        
        <div class="dice-area">
            <div class="dice" id="dice" onclick="rollDice()">ðŸŽ²</div>
            <br>
            <button class="btn" onclick="rollDice()">Roll Dice</button>
        </div>
        
        <div class="status" id="status">Tap dice or button to roll!</div>
        
        <div class="board" id="board"></div>
        
        <div>
            <button class="btn" onclick="newGame()">New Game</button>
            <button class="btn" onclick="toggleSound()">ðŸ”Š Sound</button>
        </div>
    </div>

    <script>
        // Game variables
        let currentPlayer = 0;
        let lastRoll = 0;
        let gameActive = true;
        let soundOn = true;
        let consecutiveSixes = 0;
        
        const players = ['red', 'blue', 'yellow', 'green'];
        const playerNames = ['Player 1 (Red)', 'Player 2 (Blue)', 'Player 3 (Yellow)', 'Player 4 (Green)'];
        
        // Pawn positions (-1 = home, 0-51 = board, 100 = finished)
        const pawns = {
            red: [-1, -1, -1, -1],
            blue: [-1, -1, -1, -1],
            yellow: [-1, -1, -1, -1],
            green: [-1, -1, -1, -1]
        };
        
        // Initialize game
        function initGame() {
            createBoard();
            updateDisplay();
            setStatus('Tap dice to start!');
        }
        
        // Create the board
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            for (let row = 0; row < 15; row++) {
                for (let col = 0; col < 15; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    // Color home areas
                    if (row < 6 && col < 6) cell.classList.add('home-red');
                    else if (row < 6 && col > 8) cell.classList.add('home-blue');
                    else if (row > 8 && col < 6) cell.classList.add('home-green');
                    else if (row > 8 && col > 8) cell.classList.add('home-yellow');
                    
                    // Color paths
                    if (row === 7 && col >= 1 && col <= 5) cell.classList.add('path-red');
                    else if (col === 7 && row >= 1 && row <= 5) cell.classList.add('path-blue');
                    else if (row === 7 && col >= 9 && col <= 13) cell.classList.add('path-yellow');
                    else if (col === 7 && row >= 9 && row <= 13) cell.classList.add('path-green');
                    
                    // Mark safe zones
                    if ((row === 6 && col === 2) || (row === 2 && col === 6) || 
                        (row === 6 && col === 12) || (row === 12 && col === 6) ||
                        (row === 8 && col === 2) || (row === 2 && col === 8) ||
                        (row === 8 && col === 12) || (row === 12 && col === 8)) {
                        cell.classList.add('safe');
                    }
                    
                    board.appendChild(cell);
                }
            }
            
            placePawns();
        }
        
        // Place pawns on board
        function placePawns() {
            // Remove existing pawns
            document.querySelectorAll('.pawn').forEach(p => p.remove());
            
            players.forEach((color, playerIndex) => {
                pawns[color].forEach((position, pawnIndex) => {
                    if (position === -1) {
                        // Pawn at home
                        const homePositions = getHomePositions(color);
                        const pos = homePositions[pawnIndex];
                        placePawnAt(color, pawnIndex, pos.row, pos.col);
                    } else if (position >= 0 && position < 52) {
                        // Pawn on board
                        const pos = getBoardPosition(color, position);
                        placePawnAt(color, pawnIndex, pos.row, pos.col);
                    }
                });
            });
        }
        
        // Get home positions for each color
        function getHomePositions(color) {
            switch (color) {
                case 'red': return [{row: 2, col: 2}, {row: 2, col: 4}, {row: 4, col: 2}, {row: 4, col: 4}];
                case 'blue': return [{row: 2, col: 10}, {row: 2, col: 12}, {row: 4, col: 10}, {row: 4, col: 12}];
                case 'yellow': return [{row: 10, col: 10}, {row: 10, col: 12}, {row: 12, col: 10}, {row: 12, col: 12}];
                case 'green': return [{row: 10, col: 2}, {row: 10, col: 4}, {row: 12, col: 2}, {row: 12, col: 4}];
            }
        }
        
        // Get board position from linear position
        function getBoardPosition(color, position) {
            const startPositions = {red: 1, blue: 14, yellow: 27, green: 40};
            const actualPos = (startPositions[color] + position) % 52;
            
            // Map linear position to row/col (simplified)
            if (actualPos < 13) return {row: 6, col: actualPos + 1};
            else if (actualPos < 26) return {row: actualPos - 6, col: 8};
            else if (actualPos < 39) return {row: 8, col: 21 - actualPos};
            else return {row: 47 - actualPos, col: 6};
        }
        
        // Place pawn at specific position
        function placePawnAt(color, index, row, col) {
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            if (!cell) return;
            
            const pawn = document.createElement('div');
            pawn.className = `pawn ${color}`;
            pawn.dataset.color = color;
            pawn.dataset.index = index;
            pawn.onclick = () => movePawn(color, index);
            
            // Position multiple pawns in same cell
            const existingPawns = cell.querySelectorAll('.pawn').length;
            pawn.style.left = (existingPawns * 5) + 'px';
            pawn.style.top = (existingPawns * 5) + 'px';
            
            cell.appendChild(pawn);
        }
        
        // Roll dice
        function rollDice() {
            if (!gameActive) return;
            
            const dice = document.getElementById('dice');
            dice.classList.add('rolling');
            
            // Play sound
            if (soundOn) playSound('roll');
            
            setTimeout(() => {
                const roll = Math.floor(Math.random() * 6) + 1;
                lastRoll = roll;
                dice.textContent = roll;
                dice.classList.remove('rolling');
                
                handleRoll(roll);
            }, 500);
        }
        
        // Handle dice roll
        function handleRoll(roll) {
            if (roll === 6) {
                consecutiveSixes++;
                if (consecutiveSixes >= 3) {
                    setStatus(`${playerNames[currentPlayer]} rolled 3 sixes! Turn skipped.`);
                    consecutiveSixes = 0;
                    nextPlayer();
                    return;
                }
            } else {
                consecutiveSixes = 0;
            }
            
            const movablePawns = getMovablePawns(players[currentPlayer], roll);
            
            if (movablePawns.length === 0) {
                setStatus(`${playerNames[currentPlayer]} rolled ${roll} - No moves available!`);
                setTimeout(() => {
                    if (roll !== 6) nextPlayer();
                }, 2000);
            } else {
                setStatus(`${playerNames[currentPlayer]} rolled ${roll} - Choose a pawn to move!`);
                highlightMovablePawns(movablePawns);
            }
        }
        
        // Get movable pawns
        function getMovablePawns(color, roll) {
            const movable = [];
            pawns[color].forEach((pos, index) => {
                if (pos === -1 && roll === 6) movable.push(index);
                else if (pos >= 0 && pos + roll <= 51) movable.push(index);
            });
            return movable;
        }
        
        // Highlight movable pawns
        function highlightMovablePawns(movablePawns) {
            document.querySelectorAll('.pawn').forEach(p => p.classList.remove('movable'));
            
            movablePawns.forEach(index => {
                const pawn = document.querySelector(`[data-color="${players[currentPlayer]}"][data-index="${index}"]`);
                if (pawn) pawn.classList.add('movable');
            });
        }
        
        // Move pawn
        function movePawn(color, index) {
            if (color !== players[currentPlayer]) return;
            if (!document.querySelector(`[data-color="${color}"][data-index="${index}"]`).classList.contains('movable')) return;
            
            const currentPos = pawns[color][index];
            
            if (currentPos === -1 && lastRoll === 6) {
                // Move out of home
                pawns[color][index] = 0;
                setStatus(`${playerNames[currentPlayer]} brought a pawn out!`);
                if (soundOn) playSound('move');
            } else {
                // Regular move
                const newPos = currentPos + lastRoll;
                if (newPos <= 51) {
                    pawns[color][index] = newPos;
                    checkCapture(color, newPos);
                    if (soundOn) playSound('move');
                }
                
                if (newPos === 51) {
                    setStatus(`${playerNames[currentPlayer]} got a pawn home!`);
                    checkWinner();
                }
            }
            
            placePawns();
            document.querySelectorAll('.pawn').forEach(p => p.classList.remove('movable'));
            
            if (lastRoll === 6 && gameActive) {
                setStatus(`${playerNames[currentPlayer]} gets another turn!`);
            } else {
                nextPlayer();
            }
            
            updateDisplay();
        }
        
        // Check for captures
        function checkCapture(movingColor, position) {
            players.forEach(color => {
                if (color === movingColor) return;
                
                pawns[color].forEach((pos, index) => {
                    if (pos === position) {
                        pawns[color][index] = -1; // Send home
                        setStatus(`${playerNames[currentPlayer]} captured ${color} pawn!`);
                        if (soundOn) playSound('capture');
                    }
                });
            });
        }
        
        // Check winner
        function checkWinner() {
            const finishedPawns = pawns[players[currentPlayer]].filter(pos => pos === 51).length;
            if (finishedPawns === 4) {
                gameActive = false;
                setStatus(`ðŸŽ‰ ${playerNames[currentPlayer]} WINS! ðŸŽ‰`, true);
                if (soundOn) playSound('win');
            }
        }
        
        // Next player
        function nextPlayer() {
            currentPlayer = (currentPlayer + 1) % 4;
            consecutiveSixes = 0;
            updateDisplay();
        }
        
        // Update display
        function updateDisplay() {
            // Update active player
            document.querySelectorAll('.player').forEach((p, i) => {
                p.classList.toggle('active', i === currentPlayer);
            });
            
            // Update info
            document.getElementById('info').textContent = `Current Player: ${playerNames[currentPlayer]}`;
            
            // Update stats
            players.forEach((color, index) => {
                const homeCount = pawns[color].filter(pos => pos === -1).length;
                const outCount = pawns[color].filter(pos => pos === 51).length;
                
                document.getElementById(`home${index}`).textContent = homeCount;
                document.getElementById(`out${index}`).textContent = outCount;
            });
        }
        
        // Set status message
        function setStatus(message, isWinner = false) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = isWinner ? 'status winner' : 'status';
        }
        
        // Play sound
        function playSound(type) {
            if (!soundOn) return;
            
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            switch (type) {
                case 'roll':
                    oscillator.frequency.setValueAtTime(400, audioCtx.currentTime);
                    break;
                case 'move':
                    oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
                    break;
                case 'capture':
                    oscillator.frequency.setValueAtTime(800, audioCtx.currentTime);
                    break;
                case 'win':
                    oscillator.frequency.setValueAtTime(1000, audioCtx.currentTime);
                    break;
            }
            
            gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gainNode.gain.setValueAtTime(0, audioCtx.currentTime + 0.2);
            
            oscillator.start(audioCtx.currentTime);
            oscillator.stop(audioCtx.currentTime + 0.2);
        }
        
        // New game
        function newGame() {
            currentPlayer = 0;
            gameActive = true;
            consecutiveSixes = 0;
            lastRoll = 0;
            
            // Reset pawns
            players.forEach(color => {
                pawns[color] = [-1, -1, -1, -1];
            });
            
            document.getElementById('dice').textContent = 'ðŸŽ²';
            initGame();
        }
        
        // Toggle sound
        function toggleSound() {
            soundOn = !soundOn;
            event.target.textContent = soundOn ? 'ðŸ”Š Sound' : 'ðŸ”‡ Sound';
        }
        
        // Initialize when page loads
        window.onload = initGame;
        
        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                rollDice();
            }
        });
    </script>
</body>
</html>